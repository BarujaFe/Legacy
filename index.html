<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bom dia, Felipe! ‚Äî Painel</title>
<style>
  :root{--white:#e6eef8;--muted:#94a3b8}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:16px;background:#000;color:var(--white);}
  .wrap{max-width:1900px;margin:0 auto}
  .top-actions{display:flex;flex-direction:column;gap:8px;align-items:center;margin-bottom:18px;text-align:center}
  .greeting{font-family:Inter,system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; font-size:32px; font-weight:700;}
  .links{display:flex;justify-content:center;gap:8px}
  .link{display:flex;gap:8px;align-items:center;background:transparent;padding:6px;border-radius:8px}
  .url{color:var(--white);text-decoration:underline}
  .btn{padding:6px 10px;background:#111;border:1px solid #222;color:var(--white);border-radius:8px;cursor:pointer}
  .small{font-size:14px;color:var(--muted)}

  /* grid */
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .card{background:transparent;border-radius:12px;padding:8px}
  h2{font-size:20px;margin:8px 0 10px}

  /* chart box */
  .chart-box{width:1005px;height:550px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);background:#041826}
  .chart-wrap{display:flex;justify-content:center;gap:20px;flex-wrap:nowrap}

  /* text blocks (not large) */
  .text-block{background:#031424;border-radius:8px;padding:12px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;white-space:pre-wrap;line-height:1.4;cursor:pointer;color:var(--muted);max-height:420px;overflow:auto;border:1px solid rgba(255,255,255,0.03)}
  .hint{font-size:12px;color:var(--muted);margin-top:6px;text-align:center}

  footer{margin-top:18px;font-size:20px;color:var(--muted);text-align:center;font-weight:600}

  @media (max-width:1900px){
    .chart-wrap{flex-wrap:wrap}
    .chart-box{max-width:92vw;height:auto}
  }
</style>
</head>
<body>
  <div class="wrap">

    <div class="top-actions">
      <div class="greeting">Bom dia, Felipe! Tenha um √≥timo dia!üôè</div>
      <div class="links">
        <div class="link">
          <a class="url" href="https://www.invertexto.com/localizar-e-substituir" target="_blank" rel="noopener noreferrer">Invertexto ‚Äî localizar e substituir</a>
          <button class="btn" onclick="copyText(event,'https://www.invertexto.com/localizar-e-substituir')">Copiar</button>
        </div>
      </div>
      <div class="small">Clique em qualquer bloco de texto ou bot√£o de copiar. Links abrem em nova guia.</div>
    </div>

    <div class="chart-wrap">
      <div class="card">
        <h2>Gr√°fico 1</h2>
        <div class="chart-box">
          <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=2083055028&format=interactive" style="width:100%;height:100%;border:0;" loading="lazy"></iframe>
        </div>
        <div class="hint"><a class="url" href="https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=2083055028&format=interactive" target="_blank" rel="noopener noreferrer">Abrir Gr√°fico 1 em nova aba</a> ‚Äî <button class="btn" onclick="copyText(event,'https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=2083055028&format=interactive')">Copiar link</button></div>
      </div>

      <div class="card">
        <h2>Gr√°fico 2</h2>
        <div class="chart-box">
          <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=1425520939&format=interactive" style="width:100%;height:100%;border:0;" loading="lazy"></iframe>
        </div>
        <div class="hint"><a class="url" href="https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=1425520939&format=interactive" target="_blank" rel="noopener noreferrer">Abrir Gr√°fico 2 em nova aba</a> ‚Äî <button class="btn" onclick="copyText(event,'https://docs.google.com/spreadsheets/d/e/2PACX-1vRfMop3o2aoueAAq0TJ07xVDBaUVy4pV03Ac4blEnX5sziR9OFv8xXH0jKKBU67QSzo8wRf0uaIXcbG/pubchart?oid=1425520939&format=interactive')">Copiar link</button></div>
      </div>
    </div>

    <div style="margin-top:18px; display:flex; gap:16px; flex-wrap:wrap;">
      <div class="card" style="flex:1; min-width:300px;">
        <h2>1. Ao Gemini</h2>
        <div class="text-block" tabindex="0" title="Clique para copiar" data-copy>
üí¨ Instru√ß√µes para o Gemini ‚Äì Processamento de Relat√≥rio T√©cnico (1D, 1S, 1M + Avalia√ß√£o de mercado)

Oi Gemini, estou te enviando os PDFs com relat√≥rios t√©cnicos do TradingView para os seguintes ativos:

* Ethereum (ETH)
* Aptos (APT)
* ChainLink (LINK)
* Mercado Livre (MELI34)
* Solana (SOL)
* Apple (AAPL34)
* Alibaba (BABA34)

Al√©m disso, tenho dados recentes do top 65 criptomoedas e do top 100 a√ß√µes por valor de mercado, incluindo:

Criptomoedas:

* Nome, Pre√ßo, 1h %, 24h %, 7d %, Cap. de Mercado, Volume(24h), Fornecimento Circulante, √öltimos 7 Dias

A√ß√µes:

* Pa√≠s/Regi√£o, Valor de Mercado, Pre√ßo, Varia√ß√£o %, Volume Rel., P/L, EPS dil TTM, Crescimento EPS dil. 12M Ano a Ano, Div. Yield %, Setor, Classifica√ß√£o dos Analistas

Preciso que voc√™ fa√ßa o seguinte:

### üîπ 1. Estruture a sa√≠da de forma clara e organizada

Para cada ativo dos PDFs, me entregue um bloco de texto neste formato:

Ativo: \[nome]
Pre√ßo atual: \[se dispon√≠vel no PDF]
Pre√ßo estrat√©gico de compra: \[usar como refer√™ncia]

* ETH ‚Üí US$ 4.000
* SOL ‚Üí US$ 165
* LINK ‚Üí US$ 22
* APT ‚Üí US$ 4,00
* AAPL34 ‚Üí R\$ 59
* MELI34 ‚Üí R\$ 103
* BABA34 ‚Üí R\$ 22,50‚Äì23,50

Resumo t√©cnico:

* Di√°rio (1D): \[sinal de compra/venda/manter + principais motivos]
* Semanal (1S): \[idem]
* Mensal (1M): \[idem]

Observa√ß√µes: \[anota√ß√µes relevantes, diverg√™ncias entre indicadores, suporte/resist√™ncia]

---

### üîπ 2. Foque no essencial

* Resuma Osciladores, M√©dias M√≥veis e Pontos de Piv√¥ em insights curtos (n√£o copie tabela inteira).
* Destaque contradi√ß√µes relevantes (ex.: tend√™ncia geral de baixa, mas m√©dias m√≥veis fortes em alta).
* Aponte sinais de risco (ex.: sobrecompra, perda de for√ßa no curto prazo).

---

### üîπ 3. Adapte para a estrat√©gia j√° definida

* Use os pre√ßos estrat√©gicos de compra como refer√™ncia.

  * Se o ativo est√° pr√≥ximo ou abaixo do pre√ßo estrat√©gico, marque como ‚Äúüö® oportunidade pr√≥xima‚Äù.
  * Se est√° longe, marque como ‚Äúainda distante do ponto de entrada‚Äù.

* Para os top 65 criptos e top 100 a√ß√µes, avalie:

  * Existe algum ativo com melhor ponto de entrada ou maior potencial de valoriza√ß√£o do que os que j√° monitoramos?
  * Se sim, indique nome, pre√ßo atual, pre√ßo estrat√©gico recomendado e justificativa t√©cnica resumida.
  * Classifique como ‚Äúüö® oportunidade potencial‚Äù ou ‚Äúüìå monitorar‚Äù.

---

### üîπ 4. Entregue em texto corrido e claro

* O objetivo √© eu poder copiar sua resposta e mandar direto para o ChatGPT, para que ele avalie minha situa√ß√£o de investimento.
* Sem introdu√ß√µes longas ou explica√ß√µes gen√©ricas. Apenas an√°lise condensada, padronizada e interpret√°vel, pronta para uso.

--- 
        </div>
        <p class="hint">Clique no bloco acima para copiar o texto inteiro.</p>
      </div>

      <div class="card" style="flex:1; min-width:300px;">
        <h2>2. Ao ChatGPT</h2>
        <div class="text-block" tabindex="0" title="Clique para copiar" data-copy>
üí¨ Mensagem de in√≠cio de conversa para o ChatGPT

Oi ChatGPT! Vamos dar continuidade √† nossa an√°lise de investimentos. Quero que voc√™ use o contexto da minha estrat√©gia j√° definida e o resumo t√©cnico que o Gemini me entregou (logo abaixo), incluindo tamb√©m a avalia√ß√£o do top 65 criptomoedas e top 100 a√ß√µes, para avaliar minha situa√ß√£o atual e poss√≠veis alternativas melhores.

üìå Minha estrat√©gia base:

* Apple (AAPL34) ‚Üí seguro, comprar abaixo de R\$ 59.
* Ethereum (ETH) ‚Üí seguro, comprar perto de US$ 4.000.
* Solana (SOL) ‚Üí relativamente seguro, comprar perto de US$ 165.
* Alibaba (BABA34) ‚Üí relativamente seguro, comprar entre R\$ 22,50‚Äì23,50.
* Chainlink (LINK) ‚Üí alto potencial, comprar perto de US$ 22.
* Aptos (APT) ‚Üí alto potencial/alto risco, comprar perto de US$ 4,00.
* Mercado Livre (MELI34) ‚Üí grande potencial, comprar perto de R\$ 103.

üéØ Resumo da estrat√©gia geral:

* Apple + Ethereum ‚Üí pilares de seguran√ßa.
* Solana + Alibaba ‚Üí meio-termo (risco controlado, potencial bom).
* Chainlink + Aptos + MELI ‚Üí alto potencial, risco maior.

‚ö° Sua tarefa com o resumo t√©cnico do Gemini e dados adicionais:

1. Dizer quais ativos j√° est√£o no ponto de compra.
2. Quais est√£o pr√≥ximos do ponto de entrada estrat√©gico.
3. Quais est√£o longe do ponto de entrada.
4. Indicar se algum cen√°rio mudou em rela√ß√£o √† minha estrat√©gia base.
5. Avaliar o top 65 criptos e top 100 a√ß√µes: se h√° ativos com melhor potencial ou ponto de entrada mais interessante que os ativos j√° monitorados.
6. Me dar um parecer pr√°tico: comprar, esperar, ou apenas monitorar.
7. Destacar sinais de risco ou oportunidades excepcionais.

--- 

üìÑ Resumo t√©cnico (do Gemini + dados de mercado):
abcdef

--- 

üëâ A partir disso, quero que voc√™ me d√™ uma an√°lise direta, condensada, pr√°tica e alinhada com a estrat√©gia que j√° definimos.

---
        </div>
        <p class="hint">Clique no bloco acima para copiar o texto inteiro.</p>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2>3. WebScraping (Python)</h2>
      <div class="text-block" tabindex="0" title="Clique para copiar" data-copy>
import os
import time
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from fpdf import FPDF
from PIL import Image
from webdriver_manager.chrome import ChromeDriverManager

# --- Pasta de sa√≠da ---
output_folder = os.path.join(os.path.expanduser("~"), "Documents", "CriptoSonho")
os.makedirs(output_folder, exist_ok=True)

# --- Chrome options ---
chrome_options = Options()
chrome_options.add_argument("--headless=new")
chrome_options.add_argument("--hide-scrollbars")
chrome_options.add_argument("--disable-gpu")
chrome_options.add_argument("--no-sandbox")

driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=chrome_options)
wait = WebDriverWait(driver, 15)

# --- XPaths de timeframe (confirmados por voc√™) ---
TIMEFRAME_XPATHS = {
    "1D": '//*[@id="1D"]/span[1]/span',
    "1W": '//*[@id="1W"]/span[1]/span',
    "1M": '//*[@id="1M"]/span[1]/span'
}

# ---------- Helpers ----------
def click_timeframe(xpath, timeout=8):
    """Clica no bot√£o timeframe via JS e tenta aguardar indica√ß√£o de sele√ß√£o (se houver)."""
    try:
        el = wait.until(EC.element_to_be_clickable((By.XPATH, xpath)))
        driver.execute_script("arguments[0].click();", el)
        # tentativa de esperar classe 'active' ou 'selected' aparecer ‚Äî se n√£o, seguimos ap√≥s sleep
        try:
            WebDriverWait(driver, 3).until(
                lambda d: ('active' in el.get_attribute("class") or 'selected' in el.get_attribute("class") or el.is_displayed())
            )
        except Exception:
            pass
        time.sleep(1.5)  # garante que a p√°gina/JS atualizem
        return True
    except Exception as e:
        print(f"[click_timeframe] falha ao clicar {xpath}: {e}")
        return False

def save_full_screenshot_tradingview(filename, width=1888, max_height=20000):
    """
    Salva screenshot full-page for√ßando largura 'width' para p√°ginas TradingView (dados t√©cnicos).
    Retorna caminho do arquivo salvo.
    """
    # calcula dimens√µes reais
    page_w = driver.execute_script("return Math.max(document.body.scrollWidth, document.documentElement.scrollWidth, window.innerWidth);")
    page_h = driver.execute_script("return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, window.innerHeight);")
    use_w = max(width, page_w)
    use_h = min(int(page_h), max_height)
    driver.set_window_size(use_w, use_h)
    time.sleep(0.6)
    path = os.path.join(output_folder, filename)
    driver.save_screenshot(path)
    print(f"[TradingView screenshot] Salvo: {path} ({use_w}x{use_h})")
    return path

def save_full_screenshot_overview(url, filename, target_width=4950, max_height=12000, wait_after_load=4):
    """Navega URL e salva screenshot for√ßando largura target_width."""
    driver.get(url)
    time.sleep(wait_after_load)
    page_w = driver.execute_script("return Math.max(document.body.scrollWidth, document.documentElement.scrollWidth, window.innerWidth);")
    page_h = driver.execute_script("return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, window.innerHeight);")
    use_w = max(target_width, page_w)
    use_h = min(int(page_h), max_height)
    driver.set_window_size(use_w, use_h)
    time.sleep(0.8)
    path = os.path.join(output_folder, filename)
    driver.save_screenshot(path)
    print(f"[Overview screenshot] Salvo: {path} ({use_w}x{use_h})")
    return path

def create_pdf_from_images_list(image_paths, pdf_name):
    pdf_path = os.path.join(output_folder, pdf_name)
    if os.path.exists(pdf_path):
        os.remove(pdf_path)
    pdf = FPDF(unit="pt", format="A4")
    page_w, page_h = pdf.w_pt, pdf.h_pt
    for image_path in image_paths:
        img = Image.open(image_path)
        img_w, img_h = img.size
        ratio = min(page_w / img_w, page_h / img_h)
        new_w, new_h = img_w * ratio, img_h * ratio
        x = (page_w - new_w) / 2
        y = (page_h - new_h) / 2
        pdf.add_page()
        pdf.image(image_path, x, y, new_w, new_h)
    pdf.output(pdf_path)
    print(f"[PDF] Gerado: {pdf_path}")
    return pdf_path

def safe_remove(path):
    try:
        if os.path.exists(path):
            os.remove(path)
            print(f"[Removido] {path}")
    except Exception as e:
        print(f"[Erro ao remover {path}]: {e}")

# ---------- Fluxo principal para s√≠mbolos (1D,1W,1M) ----------
def generate_tradeview_symbol_pdfs(symbols):
    """
    symbols: lista de tuples (symbol, url, output_pdf_name)
    Para cada s√≠mbolo gera 3 screenshots (1D,1W,1M) e um PDF com 3 p√°ginas.
    Retorna lista de todos os caminhos de imagens geradas.
    """
    all_images = []
    for symbol, url, pdf_name in symbols:
        print(f"\n[Processando s√≠mbolo] {symbol} -> {url}")
        imgs = []
        # abrir a p√°gina inicialmente
        driver.get(url)
        time.sleep(3)  # aguarda carregamento
        for tf, xpath in TIMEFRAME_XPATHS.items():
            # tenta clicar no timeframe (√†s vezes j√° est√° selecionado)
            clicked = click_timeframe(xpath)
            # d√° um pequeno tempo para TradingView atualizar o painel
            time.sleep(1.2)
            # salva screenshot full (usa current page)
            img_filename = f"{symbol}_{tf}.png"
            img_path = save_full_screenshot_tradingview(img_filename, width=1888, max_height=20000)
            imgs.append(img_path)
            all_images.append(img_path)
        # cria o PDF com as 3 imagens (ordem: 1D,1W,1M)
        create_pdf_from_images_list(imgs, pdf_name)
    return all_images

# ---------- Execu√ß√£o ----------
if __name__ == "__main__":
    try:
        # lista de s√≠mbolos (adicione/remova conforme quiser)
        symbols = [
            ("ETH", "https://br.tradingview.com/symbols/ETHUSD/technicals/?exchange=BINANCE", "ETH - Sinais 1D-1W-1M.pdf"),
            ("SOL", "https://br.tradingview.com/symbols/SOLUSD/technicals/?exchange=BINANCE", "SOL - Sinais 1D-1W-1M.pdf"),
            ("LINK", "https://br.tradingview.com/symbols/LINKUSDT/technicals/?exchange=BINANCE", "LINK - Sinais 1D-1W-1M.pdf"),
            ("APT", "https://br.tradingview.com/symbols/APTUSDT/technicals/?exchange=BINANCE", "APT - Sinais 1D-1W-1M.pdf"),
            ("AAPL34", "https://br.tradingview.com/symbols/BMFBOVESPA-AAPL34/technicals/", "AAPL34 - Sinais 1D-1W-1M.pdf"),
            ("MELI34", "https://br.tradingview.com/symbols/BMFBOVESPA-MELI34/technicals/", "MELI34 - Sinais 1D-1W-1M.pdf"),
            ("BABA34", "https://br.tradingview.com/symbols/BMFBOVESPA-BABA34/technicals/", "BABA34 - Sinais 1D-1W-1M.pdf"),
            ("TSMC34", "https://br.tradingview.com/symbols/BMFBOVESPA-TSMC34/technicals/", "TSMC34 - Sinais 1D-1W-1M.pdf")
        ]

        # 1) Gera PDFs t√©cnicos (cada PDF com 3 p√°ginas)
        technical_images = generate_tradeview_symbol_pdfs(symbols)

        # 2) Gera screenshots do cen√°rio geral (CoinMarketCap + TradingView Companies) e um PDF √∫nico
        overview_pages = [
            ("https://coinmarketcap.com/pt-br/", "CoinMarketCap_full_4950.png"),
            ("https://br.tradingview.com/markets/world-stocks/worlds-largest-companies/", "TradingView_Companies_full_4950.png")
        ]
        overview_images = []
        for url, fname in overview_pages:
            print(f"\n[Processando vis√£o geral] {url}")
            img = save_full_screenshot_overview(url, fname, target_width=4950, max_height=12000, wait_after_load=4)
            overview_images.append(img)

        create_pdf_from_images_list(overview_images, "Relatorio_Cripto_Mercado.pdf")

        # 3) Limpeza: remove todas as imagens geradas (t√©cnicas + overview)
        print("\n[Limpeza] removendo imagens tempor√°rias...")
        for p in technical_images + overview_images:
            safe_remove(p)

        print("\nTudo pronto ‚Äî PDFs gerados em:", output_folder)

    finally:
        driver.quit()
        print("Conclu√≠do. Driver encerrado.")


      </div>
      <div style="margin-top:8px;text-align:center"><button class="btn" onclick="copyText(event, webScriptText)">Copiar script Python</button></div>
    </div>

    <footer>
      <p style="font-family:Garamond,serif;margin-top:8px;">O sucesso n√£o √© um acidente. √â uma escolha que voc√™ faz, todos os dias.</p>
    </footer>

  </div>

  <div id="toast" style="position:fixed;right:18px;bottom:18px;background:#06b6d4;color:#042023;padding:10px 14px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.5);transform:translateY(12px);opacity:0;pointer-events:none;transition:all .28s ease">Copiado!</div>

<script>
  // script guardado para copiar
  const webScriptText = `# Script Python original... (coloque aqui o conte√∫do completo se quiser)`;

  function copyText(ev, text) {
    if (ev) ev.stopPropagation();
    _copyString(text);
  }

  document.querySelectorAll('[data-copy]').forEach(el=>{
    el.addEventListener('click', ()=>_copyString(el.innerText.trim()));
  });

  function _copyString(text){
    if(!text) return _showToast('Nada pra copiar');
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(text).then(()=>_showToast('Copiado!'), ()=>_fallbackCopy(text));
    } else {
      _fallbackCopy(text);
    }
  }

  function _fallbackCopy(text){
    try {
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position = 'fixed';
      ta.style.left = '-9999px';
      document.body.appendChild(ta);
      ta.select();
      const ok = document.execCommand('copy');
      document.body.removeChild(ta);
      _showToast(ok ? 'Copiado!' : 'Falha ao copiar');
    } catch (e){
      _showToast('Falha ao copiar');
    }
  }

  function _showToast(msg){
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.opacity = '1';
    t.style.transform = 'translateY(0)';
    t.style.pointerEvents = 'auto';
    setTimeout(()=>{t.style.opacity='0';t.style.transform='translateY(12px)';t.style.pointerEvents='none';}, 1600);
  }
</script>
</body>
</html>
